#include <cstdint>
#include "instruction.h"

constexpr uint8_t Instruction::modeSizes[14];

const Instruction decode_instruction[256] = {
    Instruction(0x00, BRK, IMPLIED),
    Instruction(0x01, ORA, INDIRECT_X),
    Instruction(0x02, BAD_TYPE, BAD_MODE),
    Instruction(0x03, BAD_TYPE, BAD_MODE),
    Instruction(0x04, BAD_TYPE, BAD_MODE),
    Instruction(0x05, ORA, ZEROPAGE),
    Instruction(0x06, ASL, ZEROPAGE),
    Instruction(0x07, BAD_TYPE, BAD_MODE),
    Instruction(0x08, PHP, IMPLIED),
    Instruction(0x09, ORA, IMMEDIATE),
    Instruction(0x0A, ASL, ACCUMULATOR),
    Instruction(0x0B, BAD_TYPE, BAD_MODE),
    Instruction(0x0C, BAD_TYPE, BAD_MODE),
    Instruction(0x0D, ORA, ABSOLUTE),
    Instruction(0x0E, ASL, ABSOLUTE),
    Instruction(0x0F, BAD_TYPE, BAD_MODE),

    Instruction(0x10, BPL, RELATIVE),
    Instruction(0x11, ORA, INDIRECT_Y),
    Instruction(0x12, BAD_TYPE, BAD_MODE),
    Instruction(0x13, BAD_TYPE, BAD_MODE),
    Instruction(0x14, BAD_TYPE, BAD_MODE),
    Instruction(0x15, ORA, ZEROPAGE_X),
    Instruction(0x16, ASL, ZEROPAGE_X),
    Instruction(0x17, BAD_TYPE, BAD_MODE),
    Instruction(0x18, CLC, IMPLIED),
    Instruction(0x19, ORA, ABSOLUTE_Y),
    Instruction(0x1A, BAD_TYPE, BAD_MODE),
    Instruction(0x1B, BAD_TYPE, BAD_MODE),
    Instruction(0x1C, BAD_TYPE, BAD_MODE),
    Instruction(0x1D, ORA, ABSOLUTE_X),
    Instruction(0x1E, ASL, ABSOLUTE_X),
    Instruction(0x1F, BAD_TYPE, BAD_MODE),

    Instruction(0x20, JSR, ABSOLUTE),
    Instruction(0x21, AND, INDIRECT_X),
    Instruction(0x22, BAD_TYPE, BAD_MODE),
    Instruction(0x23, BAD_TYPE, BAD_MODE),
    Instruction(0x24, BIT, ZEROPAGE),
    Instruction(0x25, AND, ZEROPAGE),
    Instruction(0x26, ROL, ZEROPAGE),
    Instruction(0x27, BAD_TYPE, BAD_MODE),
    Instruction(0x28, PLP, IMPLIED),
    Instruction(0x29, AND, IMMEDIATE),
    Instruction(0x2A, ROL, ACCUMULATOR),
    Instruction(0x2B, BAD_TYPE, BAD_MODE),
    Instruction(0x2C, BIT, ABSOLUTE),
    Instruction(0x2D, AND, ABSOLUTE),
    Instruction(0x2E, ROL, ABSOLUTE),
    Instruction(0x2F, BAD_TYPE, BAD_MODE),

    Instruction(0x30, BMI, RELATIVE),
    Instruction(0x31, AND, INDIRECT_Y),
    Instruction(0x32, BAD_TYPE, BAD_MODE),
    Instruction(0x33, BAD_TYPE, BAD_MODE),
    Instruction(0x34, BAD_TYPE, BAD_MODE),
    Instruction(0x35, AND, ZEROPAGE_X),
    Instruction(0x36, ROL, ZEROPAGE_X),
    Instruction(0x37, BAD_TYPE, BAD_MODE),
    Instruction(0x38, SEC, IMPLIED),
    Instruction(0x39, AND, ABSOLUTE_Y),
    Instruction(0x3A, BAD_TYPE, BAD_MODE),
    Instruction(0x3B, BAD_TYPE, BAD_MODE),
    Instruction(0x3C, BAD_TYPE, BAD_MODE),
    Instruction(0x3D, AND, ABSOLUTE_X),
    Instruction(0x3E, ROL, ABSOLUTE_X),
    Instruction(0x3F, BAD_TYPE, BAD_MODE),

    Instruction(0x40, RTI, IMPLIED),
    Instruction(0x41, EOR, INDIRECT_X),
    Instruction(0x42, BAD_TYPE, BAD_MODE),
    Instruction(0x43, BAD_TYPE, BAD_MODE),
    Instruction(0x44, BAD_TYPE, BAD_MODE),
    Instruction(0x45, EOR, ZEROPAGE),
    Instruction(0x46, LSR, ZEROPAGE),
    Instruction(0x47, BAD_TYPE, BAD_MODE),
    Instruction(0x48, PHA, IMPLIED),
    Instruction(0x49, EOR, IMMEDIATE),
    Instruction(0x4A, LSR, ACCUMULATOR),
    Instruction(0x4B, BAD_TYPE, BAD_MODE),
    Instruction(0x4C, JMP, ABSOLUTE),
    Instruction(0x4D, EOR, ABSOLUTE),
    Instruction(0x4E, LSR, ABSOLUTE),
    Instruction(0x4F, BAD_TYPE, BAD_MODE),

    Instruction(0x50, BVC, RELATIVE),
    Instruction(0x51, EOR, INDIRECT_Y),
    Instruction(0x52, BAD_TYPE, BAD_MODE),
    Instruction(0x53, BAD_TYPE, BAD_MODE),
    Instruction(0x54, BAD_TYPE, BAD_MODE),
    Instruction(0x55, EOR, ZEROPAGE_X),
    Instruction(0x56, LSR, ZEROPAGE_X),
    Instruction(0x57, BAD_TYPE, BAD_MODE),
    Instruction(0x58, CLI, IMPLIED),
    Instruction(0x59, EOR, ABSOLUTE_Y),
    Instruction(0x5A, BAD_TYPE, BAD_MODE),
    Instruction(0x5B, BAD_TYPE, BAD_MODE),
    Instruction(0x5C, BAD_TYPE, BAD_MODE),
    Instruction(0x5D, EOR, ABSOLUTE_X),
    Instruction(0x5E, LSR, ABSOLUTE_X),
    Instruction(0x5F, BAD_TYPE, BAD_MODE),

    Instruction(0x60, RTS, IMPLIED),
    Instruction(0x61, ADC, INDIRECT_X),
    Instruction(0x62, BAD_TYPE, BAD_MODE),
    Instruction(0x63, BAD_TYPE, BAD_MODE),
    Instruction(0x64, BAD_TYPE, BAD_MODE),
    Instruction(0x65, ADC, ZEROPAGE),
    Instruction(0x66, ROR, ZEROPAGE),
    Instruction(0x67, BAD_TYPE, BAD_MODE),
    Instruction(0x68, PLA, IMPLIED),
    Instruction(0x69, ADC, IMMEDIATE),
    Instruction(0x6A, ROR, ACCUMULATOR),
    Instruction(0x6B, BAD_TYPE, BAD_MODE),
    Instruction(0x6C, JMP, INDIRECT),
    Instruction(0x6D, ADC, ABSOLUTE),
    Instruction(0x6E, ROR, ABSOLUTE),
    Instruction(0x6F, BAD_TYPE, BAD_MODE),

    Instruction(0x70, BVS, RELATIVE),
    Instruction(0x71, ADC, INDIRECT_Y),
    Instruction(0x72, BAD_TYPE, BAD_MODE),
    Instruction(0x73, BAD_TYPE, BAD_MODE),
    Instruction(0x74, BAD_TYPE, BAD_MODE),
    Instruction(0x75, ADC, ZEROPAGE_X),
    Instruction(0x76, ROR, ZEROPAGE_X),
    Instruction(0x77, BAD_TYPE, BAD_MODE),
    Instruction(0x78, SEI, IMPLIED),
    Instruction(0x79, ADC, ABSOLUTE_Y),
    Instruction(0x7A, BAD_TYPE, BAD_MODE),
    Instruction(0x7B, BAD_TYPE, BAD_MODE),
    Instruction(0x7C, BAD_TYPE, BAD_MODE),
    Instruction(0x7D, ADC, ABSOLUTE_X),
    Instruction(0x7E, ROR, ABSOLUTE_X),
    Instruction(0x7F, BAD_TYPE, BAD_MODE),

    Instruction(0x80, BAD_TYPE, BAD_MODE),
    Instruction(0x81, STA, INDIRECT_X),
    Instruction(0x82, BAD_TYPE, BAD_MODE),
    Instruction(0x83, BAD_TYPE, BAD_MODE),
    Instruction(0x84, STY, ZEROPAGE),
    Instruction(0x85, STA, ZEROPAGE),
    Instruction(0x86, STX, ZEROPAGE),
    Instruction(0x87, BAD_TYPE, BAD_MODE),
    Instruction(0x88, DEY, IMPLIED),
    Instruction(0x89, BAD_TYPE, BAD_MODE),
    Instruction(0x8A, TXA, IMPLIED),
    Instruction(0x8B, BAD_TYPE, BAD_MODE),
    Instruction(0x8C, STY, ABSOLUTE),
    Instruction(0x8D, STA, ABSOLUTE),
    Instruction(0x8E, STX, ABSOLUTE),
    Instruction(0x8F, BAD_TYPE, BAD_MODE),

    Instruction(0x90, BCC, RELATIVE),
    Instruction(0x91, STA, INDIRECT_Y),
    Instruction(0x92, BAD_TYPE, BAD_MODE),
    Instruction(0x93, BAD_TYPE, BAD_MODE),
    Instruction(0x94, STY, ZEROPAGE_X),
    Instruction(0x95, STA, ZEROPAGE_X),
    Instruction(0x96, STX, ZEROPAGE_Y),
    Instruction(0x97, BAD_TYPE, BAD_MODE),
    Instruction(0x98, TYA, IMPLIED),
    Instruction(0x99, STA, ABSOLUTE_Y),
    Instruction(0x9A, TXS, IMPLIED),
    Instruction(0x9B, BAD_TYPE, BAD_MODE),
    Instruction(0x9C, BAD_TYPE, BAD_MODE),
    Instruction(0x9D, STA, ABSOLUTE_X),
    Instruction(0x9E, BAD_TYPE, BAD_MODE),
    Instruction(0x9F, BAD_TYPE, BAD_MODE),

    Instruction(0xA0, LDY, IMMEDIATE),
    Instruction(0xA1, LDA, INDIRECT_X),
    Instruction(0xA2, LDX, IMMEDIATE),
    Instruction(0xA3, BAD_TYPE, BAD_MODE),
    Instruction(0xA4, LDY, ZEROPAGE),
    Instruction(0xA5, LDA, ZEROPAGE),
    Instruction(0xA6, LDX, ZEROPAGE),
    Instruction(0xA7, BAD_TYPE, BAD_MODE),
    Instruction(0xA8, TAY, IMPLIED),
    Instruction(0xA9, LDA, IMMEDIATE),
    Instruction(0xAA, TAX, IMPLIED),
    Instruction(0xAB, BAD_TYPE, BAD_MODE),
    Instruction(0xAC, LDY, ABSOLUTE),
    Instruction(0xAD, LDA, ABSOLUTE),
    Instruction(0xAE, LDX, ABSOLUTE),
    Instruction(0xAF, BAD_TYPE, BAD_MODE),

    Instruction(0xB0, BCS, RELATIVE),
    Instruction(0xB1, LDA, INDIRECT_Y),
    Instruction(0xB2, BAD_TYPE, BAD_MODE),
    Instruction(0xB3, BAD_TYPE, BAD_MODE),
    Instruction(0xB4, LDY, ZEROPAGE_X),
    Instruction(0xB5, LDA, ZEROPAGE_X),
    Instruction(0xB6, LDX, ZEROPAGE_Y),
    Instruction(0xB7, BAD_TYPE, BAD_MODE),
    Instruction(0xB8, CLV, IMPLIED),
    Instruction(0xB9, LDA, ABSOLUTE_Y),
    Instruction(0xBA, TSX, IMPLIED),
    Instruction(0xBB, BAD_TYPE, BAD_MODE),
    Instruction(0xBC, LDY, ABSOLUTE_X),
    Instruction(0xBD, LDA, ABSOLUTE_X),
    Instruction(0xBE, LDX, ABSOLUTE_Y),
    Instruction(0xBF, BAD_TYPE, BAD_MODE),

    Instruction(0xC0, CPY, IMMEDIATE),
    Instruction(0xC1, CMP, INDIRECT_X),
    Instruction(0xC2, BAD_TYPE, BAD_MODE),
    Instruction(0xC3, BAD_TYPE, BAD_MODE),
    Instruction(0xC4, CPY, ZEROPAGE),
    Instruction(0xC5, CMP, ZEROPAGE),
    Instruction(0xC6, DEC, ZEROPAGE),
    Instruction(0xC7, BAD_TYPE, BAD_MODE),
    Instruction(0xC8, INY, IMPLIED),
    Instruction(0xC9, CMP, IMMEDIATE),
    Instruction(0xCA, DEX, IMPLIED),
    Instruction(0xCB, BAD_TYPE, BAD_MODE),
    Instruction(0xCC, CPY, ABSOLUTE),
    Instruction(0xCD, CMP, ABSOLUTE),
    Instruction(0xCE, DEC, ABSOLUTE),
    Instruction(0xCF, BAD_TYPE, BAD_MODE),

    Instruction(0xD0, BNE, RELATIVE),
    Instruction(0xD1, CMP, INDIRECT_Y),
    Instruction(0xD2, BAD_TYPE, BAD_MODE),
    Instruction(0xD3, BAD_TYPE, BAD_MODE),
    Instruction(0xD4, BAD_TYPE, BAD_MODE),
    Instruction(0xD5, CMP, ZEROPAGE_X),
    Instruction(0xD6, DEC, ZEROPAGE_X),
    Instruction(0xD7, BAD_TYPE, BAD_MODE),
    Instruction(0xD8, CLD, IMPLIED),
    Instruction(0xD9, CMP, ABSOLUTE_Y),
    Instruction(0xDA, BAD_TYPE, BAD_MODE),
    Instruction(0xDB, BAD_TYPE, BAD_MODE),
    Instruction(0xDC, BAD_TYPE, BAD_MODE),
    Instruction(0xDD, CMP, ABSOLUTE_X),
    Instruction(0xDE, DEC, ABSOLUTE_X),
    Instruction(0xDF, BAD_TYPE, BAD_MODE),

    Instruction(0xE0, CPX, IMMEDIATE),
    Instruction(0xE1, SBC, INDIRECT_X),
    Instruction(0xE2, BAD_TYPE, BAD_MODE),
    Instruction(0xE3, BAD_TYPE, BAD_MODE),
    Instruction(0xE4, CPX, ZEROPAGE),
    Instruction(0xE5, SBC, ZEROPAGE),
    Instruction(0xE6, INC, ZEROPAGE),
    Instruction(0xE7, BAD_TYPE, BAD_MODE),
    Instruction(0xE8, INX, IMPLIED),
    Instruction(0xE9, SBC, IMMEDIATE),
    Instruction(0xEA, NOP, IMPLIED),
    Instruction(0xEB, BAD_TYPE, BAD_MODE),
    Instruction(0xEC, CPX, ABSOLUTE),
    Instruction(0xED, SBC, ABSOLUTE),
    Instruction(0xEE, INC, ABSOLUTE),
    Instruction(0xEF, BAD_TYPE, BAD_MODE),

    Instruction(0xF0, BEQ, RELATIVE),
    Instruction(0xF1, SBC, INDIRECT_Y),
    Instruction(0xF2, BAD_TYPE, BAD_MODE),
    Instruction(0xF3, BAD_TYPE, BAD_MODE),
    Instruction(0xF4, BAD_TYPE, BAD_MODE),
    Instruction(0xF5, SBC, ZEROPAGE_X),
    Instruction(0xF6, INC, ZEROPAGE_X),
    Instruction(0xF7, BAD_TYPE, BAD_MODE),
    Instruction(0xF8, SED, IMPLIED),
    Instruction(0xF9, SBC, ABSOLUTE_Y),
    Instruction(0xFA, BAD_TYPE, BAD_MODE),
    Instruction(0xFB, BAD_TYPE, BAD_MODE),
    Instruction(0xFC, BAD_TYPE, BAD_MODE),
    Instruction(0xFD, SBC, ABSOLUTE_X),
    Instruction(0xFE, INC, ABSOLUTE_X),
    Instruction(0xFF, BAD_TYPE, BAD_MODE)
};
